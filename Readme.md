# Sweet Shop Management System

A full-stack web application designed to manage a sweet shop's inventory, sales, and user interactions. Built with the MERN stack (MongoDB, Express, React, Node.js) and modern UI libraries.

## ðŸš€ Tech Stack

-   **Frontend:** React (Vite), TypeScript, Tailwind CSS, Shadcn UI
-   **Backend:** Node.js, Express.js
-   **Database:** MongoDB
-   **Authentication:** JWT (JSON Web Tokens)
-   **Deployment:** Vercel (Configured for both Client and Server)

## âœ¨ Features

-   **Authentication System**: Secure Login and Registration for Users and Admins.
-   **Dashboard**: Interactive dashboard for visualizing shop data.
-   **Inventory Management**: Browse available sweets and products.
-   **Admin Panel**: Specialized routes for administrators to add and manage products.
-   **Purchase History**: Users can view their past purchases.
-   **Responsive Design**: Fully responsive UI built with Tailwind CSS.

## ðŸ› ï¸ Getting Started (Localhost)

Follow these steps to run the application locally on your machine.

### Prerequisites

-   [Node.js](https://nodejs.org/) (v16 or higher)
-   [MongoDB](https://www.mongodb.com/) (Local or Atlas URL)

### 1. Server Setup

Navigate to the `server` directory and install dependencies.

```bash
cd server
npm install
```

Create a `.env` file in the `server` directory with the following variables:

```env
PORT=1000
MONGO_URI=your_mongodb_connection_string
JWT_SECRET=your_super_secret_key
FRONTEND_URL=http://localhost:5173
```

Start the backend server:

```bash
npm run dev
```

The server should now be running on `http://localhost:1000`.

### 2. Client Setup

Open a new terminal, navigate to the `client` directory, and install dependencies.

```bash
cd client
npm install
```

Start the frontend development server:

```bash
npm run dev
```

The application will be accessible at `http://localhost:5173`.

## ðŸ“‚ Project Structure

-   **client/**: React frontend application.
    -   `src/pages`: Application views (Home, Login, Register, Dashboard, etc.).
    -   `src/components`: Reusable UI components.
    -   `src/contexts`: Global state management (e.g., UserContext).
-   **server/**: Express backend application.
    -   `routes/`: API route definitions.
    -   `controllers/`: Logic for handling API requests.
    -   `models/`: Mongoose database schemas.
    -   `middleware/`: Auth and utility middleware.

## â˜ï¸ Deployment

This project is configured for deployment on **Vercel**.

### Server
The server is configured using `vercel.json` to run as a serverless function.
1.  Import the `server` directory project into Vercel.
2.  Set the `FRONTEND_URL`, `MONGO_URI`, and `JWT_SECRET` in Vercel Environment Variables.

### Client
1.  Import the `client` directory project into Vercel.
2.  The build settings should automatically be detected (Vite).

## ðŸ¤– AI Usage

This project leverages AI assistance to accelerate development and ensure best practices.

-   **Boilerplate Generation**: Used AI to generate the initial project structure for both the Express backend and React (Vite) frontend, effectively bootstrapping the application.
-   **Test Driven Development (TDD)**: AI was utilized to design and implement the entire backend testing suite using **Jest**, **Supertest**, and **MongoMemoryServer**. Use cases include:
    -   Generating comprehensive test cases for Authentication, Sweets, and Inventory routes.
    -   Configuring the test environment for isolation and reliability.
    -   Automating the verification of complex logic like stock deductions and authorization checks.
-   **Component Implementation**: AI assisted in integrating **Shadcn UI** components and refactoring forms (e.g., Registration Form) to use modern validation schemas with **Zod** and **React Hook Form**.
-   **Debugging & Refactoring**: Used AI to identify and resolve issues such as:
    -   Refactoring `server.js` to support testable exports.
    -   Debugging "Async Client Component" errors in Next.js/React environments.
    -   Fixing authentication middleware and route handling logic.

### ðŸ§© Sample Code Generated by AI

**1. Test Setup (In-Memory MongoDB Integration)**
`server/tests/setup.js`
```javascript
import { MongoMemoryServer } from 'mongodb-memory-server';
import mongoose from 'mongoose';

let mongod;

export const connect = async () => {
    try {
        mongod = await MongoMemoryServer.create();
        const uri = mongod.getUri();
        
        await mongoose.disconnect();
        await mongoose.connect(uri);
    } catch (error) {
        console.error("Error connecting to in-memory database:", error);
        process.exit(1);
    }
};
```

**2. Integration Test Example (User Registration)**
`server/tests/auth.test.js`
```javascript
describe('POST /api/auth/register', () => {
    it('should register a new user', async () => {
        const res = await request(app)
            .post('/api/auth/register')
            .send({
                name: 'Test User',
                email: 'test@example.com',
                password: 'password123',
                role: 'admin'
            });
        expect(res.statusCode).toBe(200);
        expect(res.body.data).toHaveProperty('accessToken');
        expect(res.body.data).toHaveProperty('name', 'Test User');
    });

    it('should not register a user with existing email', async () => {
        await request(app)
            .post('/api/auth/register')
            .send({
                name: 'Test User',
                email: 'test@example.com',
                password: 'password123',
                role: 'user'
            });

        const res = await request(app)
            .post('/api/auth/register')
            .send({
                name: 'Test User 2',
                email: 'test@example.com',
                password: 'password123',
                role: 'user'
            });
        expect(res.statusCode).toBe(400);
        expect(res.body).toHaveProperty('message', 'User already exists');
    });
});
```

